# 要件ドキュメント

## はじめに
本要件は、`raw_markdowns` 配下に存在する学習用Markdownコンテンツを、Next.js 15のApp Router構成に合わせて `src/app/docs` 配下へ移行・分割し、デモドキュメントを置き換えて公開可能にすることを目的とする。これにより、学生が参照しやすい情報設計（ページ分割・ルーティング・検索）と、保守しやすいリポジトリ構造（コンテンツの所在一元化・再利用可能なテンプレート）を実現する。

入力となるプロジェクト記述（抜粋）:
- `raw_markdowns` に表示すべきMarkdownがある。
- 内容ごとに分割し、`src/app/docs/` 内に然るべきフォルダを作成して配置する。
- `src/app/docs` の既存ドキュメントはデモのため削除可（作成見本としてのみ参照）。
- 本サイトは学生の学習用に利用される。

## 要件

### 要件 1: コンテンツ移行と構造化
目的: 編集者として、`raw_markdowns` のMarkdownを論理的に分割し、`src/app/docs` のルート構造に沿って配置したい。そうすることで、学生が章・節ごとに閲覧でき、URL設計も安定する。

#### 受け入れ条件（EARS）
1. WHEN `raw_markdowns` にMarkdownファイルが存在する THEN ドキュメント移行プロセス SHALL 対応する `.md` ページを `src/app/docs` 配下に生成する。
2. IF 1つのMarkdownに複数の第1見出し（H1）が含まれる THEN ドキュメント移行プロセス SHALL 各H1を独立ページとして分割し、親フォルダ配下に配置する。
3. WHEN 新規ページを生成する THEN ドキュメント移行プロセス SHALL ページファイル先頭にFront Matter（少なくとも `title`, `description`）を付与し、`title` は先頭の見出しから導出する。
4. WHERE 既存のデモドキュメントが `src/app/docs` に存在する THE ドキュメント移行プロセス SHALL デモ用ファイルを削除し、移行後のページ群で置き換える。
5. WHILE `raw_markdowns` の原本管理を継続する THE ドキュメント移行プロセス SHALL 原本を改変せず、コピー/派生物のみを `src/app/docs` に生成する。

### 要件 2: ルーティングと到達可能性
目的: 学生として、生成された各ページへ安定したパスでアクセスしたい。そうすることで、学習の導線が明確になり、授業内外での参照が容易になる。

#### 受け入れ条件（EARS）
1. WHEN ページが `src/app/docs` に追加される THEN ドキュメントサイト SHALL 同ページに対するルートを自動公開し、ブラウザで直接アクセス可能にする。
2. IF ページファイル名からスラッグが決定される THEN ドキュメントサイト SHALL スラッグに基づく安定したURLを提供する。
3. WHERE 内部リンクが相対パスで記述される THE ドキュメントサイト SHALL 同一サイト内の対応ページへ正しく遷移する。
4. WHILE ナビゲーション要素（サイドバー等）が表示される THE ドキュメントサイト SHALL 新規ページのリンクをナビゲーションに追加し、リンク切れを発生させない。

### 要件 3: レンダリングと記法互換性
目的: 学生として、デモと同等の見た目と機能でMarkdownが表示されてほしい。そうすることで、コード・画像・リンクなどをストレスなく学習に活用できる。

#### 受け入れ条件（EARS）
1. WHEN ページに見出し・段落・箇条書きが含まれる THEN ドキュメントレンダラ SHALL 見出し(H1–H4)・段落・箇条書きを対応するHTML要素で表示する。
2. IF コードブロックが含まれる THEN ドキュメントレンダラ SHALL 改行とインデントを保持して内容を表示する。
3. IF 画像または外部リンクが記載される THEN ドキュメントレンダラ SHALL 画像の表示とリンクの遷移をエラーなく実行する。
4. WHERE ページタイトルがFront Matterに定義される THE ドキュメントレンダラ SHALL ブラウザのタイトルおよびページヘッダに当該タイトルを反映する。
5. WHILE ページを表示する THE ドキュメントサイト SHALL ブラウザコンソールにエラーを出力しない。

### 要件 4: 検索とインデックス連携
目的: 学生として、サイト内検索から新規コンテンツを素早く見つけたい。そうすることで、章や用語を横断的に探索できる。

#### 受け入れ条件（EARS）
1. WHEN サイトのビルドが実行される THEN 検索インデクサ SHALL `src/app/docs` 配下の新規ページをインデックスに追加する。
2. IF ページに `title` と本文が存在する THEN 検索インデクサ SHALL タイトルと本文のテキストを検索対象として登録する。
3. WHERE 既存の検索UIが利用可能である THE ドキュメントサイト SHALL 新規ページのキーワード検索に対して少なくとも1件の該当結果を返す。

### 要件 5: 品質・非機能要件
目的: 保守者として、移行後もビルドとLintが安定し、開発体験を損なわないようにしたい。

#### 受け入れ条件（EARS）
1. WHEN `npm run build` を実行する THEN ビルドパイプライン SHALL エラーなく完了し、移行追加によるビルド失敗を発生させない。
2. WHEN `npm run lint` を実行する THEN ビルドパイプライン SHALL Lintエラーを発生させない（既存ルールに準拠）。
3. IF デモ置換に伴いファイル削除が発生する THEN ドキュメント移行プロセス SHALL 参照のない孤立リンクやルートを残さない。
4. WHILE リポジトリ構造を維持する THE ドキュメント移行プロセス SHALL `src/app/docs` 以外のアプリコードに破壊的変更を加えない。

